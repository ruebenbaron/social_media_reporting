<!DOCTYPE html>
<html>
  <head>
    <title>Reporting Oktober 2016</title>
  </head>
  <body>
    <script>
      
      
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '339440106419025',
          xfbml      : true,
          version    : 'v2.8'
        });
        var wettbewerber = ["mercedesbenzbank","ingdiba", "targobank", "comdirect", "fidorbank", "deutsche.kreditbank", "consorsbank", "commerzbank", "deutschebank", "ally", "barclaysUK"];
        var access_token = "EAACEdEose0cBALEEfswBMsbUy7vPbQTtNXMeKOCSvKFKAcZCgnPcFGoZCPDK85AIN5HFJpRTpwyfatYzQC5L4sqnpQVwRI2M9dmHZBzGH7wX1qOCciGw5y7oa69IwEy1QJVZBHpZBU2To7zp3tAYoHsnIupXBmIDXKofWJaH1UAZDZD"

        function createPageDiv(page_name) {
          var divResults = document.getElementById("results");
          var div = document.createElement("div");
          div.id = page_name;
          divResults.appendChild(div);
        }
        
        function appendHeader(page_name, data) {
          var div = document.getElementById(page_name);
          var head = document.createElement("h1");
          var node = document.createTextNode(data);
          head.appendChild(node);
          div.appendChild(head);
        }
        
        function appendParagraph(page_name, data) {
          var div = document.getElementById(page_name);
          var para = document.createElement("p");
          var node = document.createTextNode(data);
          para.appendChild(node);
          div.appendChild(para);
        }
        
        function appendFanCount(page_name) {
          FB.api(
            '/' + page_name,
            'GET',
            {"fields":"fan_count", "access_token":access_token},
            function(response) {
              var fan_count = response.fan_count;
              appendParagraph(page_name, "Fan Count: " + fan_count.toString());
            }
          );
        }

        function appendPostCount(page_name) {
          FB.api(
            '/' + page_name + '/posts',
            'GET',
            {"fields":"message,likes.limit(0).summary(1)","since":"2016-09-01","until":"2016-10-01","access_token":access_token},
            function(response) {
              var post_count = response.data.length;
              appendParagraph(page_name, "Post Count: " + post_count.toString());
            }
          );
        }
        
        for (i = 0; i < wettbewerber.length; i++) {
          createPageDiv(wettbewerber[i]);
          appendHeader(wettbewerber[i], "Page: " + wettbewerber[i]);
          appendFanCount(wettbewerber[i]);
          appendPostCount(wettbewerber[i]);
        }
          
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>


    <div id="results">
      
    </div>
  </body>
</html>
